---
title: Organization SSO Authentication
summary: Learn how to log in to the TiDB Cloud console via your customized organization authentication.
---

# 組織SSO認証 {#organization-sso-authentication}

シングルサインオン（SSO）は、TiDB Cloudの[組織](/tidb-cloud/tidb-cloud-glossary.md#organization)のメンバーが、電子メールアドレスとパスワードの代わりに、アイデンティティプロバイダ（IdP）からのアイデンティティを使用してTiDB Cloudにログインできるようにする認証スキームです。

TiDB Cloudは、次の2種類のSSO認証をサポートしています。

- [基本的なSSO](/tidb-cloud/tidb-cloud-sso-authentication.md)：メンバーは、GitHub、Google、またはMicrosoftの認証方法を使用して[TiDB Cloudコンソール](https://tidbcloud.com/)にログインできます。基本的なSSOは、TiDB Cloudのすべての組織でデフォルトで有効になっています。

- クラウド組織SSO：メンバーは、組織で指定された認証方法を使用して、TiDB Cloudのカスタムログインページにログインできます。クラウド組織SSOはデフォルトで無効になっています。

基本的なSSOと比較して、クラウド組織SSOは、より柔軟性とカスタマイズ性を提供し、組織のセキュリティとコンプライアンス要件をよりよく満たすことができます。たとえば、ログインページに表示される認証方法を指定したり、ログインに許可される電子メールアドレスのドメインを制限したり、[OpenID Connect（OIDC）](https://openid.net/connect/)または[Security Assertion Markup Language（SAML）](https://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)アイデンティティプロトコルを使用するアイデンティティプロバイダ（IdP）でTiDB Cloudにログインできるようにしたりできます。

このドキュメントでは、組織の認証スキームを基本的なSSOからクラウド組織SSOに移行する方法について学びます。

> **Note:**
>
> クラウド組織SSO機能は、有料の組織でのみ利用可能です。

## 開始する前に {#before-you-begin}

クラウド組織SSOに移行する前に、組織の以下の項目を確認してください。

> **Note:**
>
> - クラウド組織SSOが有効になると、無効にすることはできません。
> - クラウド組織SSOを有効にするには、TiDB Cloud組織の`組織所有者`の役割である必要があります。役割についての詳細は、[ユーザーの役割](/tidb-cloud/manage-user-access.md#user-roles)を参照してください。

### カスタムURLを決定する {#decide-a-custom-url-for-the-tidb-cloud-login-page-of-your-organization}

クラウド組織SSOが有効になると、メンバーはTiDB Cloudにログインするために、公開ログインURL（`https://tidbcloud.com`）の代わりにカスタムURLを使用する必要があります。

カスタムURLは有効化後に変更できないため、事前に使用するURLを決定する必要があります。

カスタムURLの形式は`https://tidbcloud.com/enterprise/signin/your-company-name`であり、会社名をカスタマイズできます。

### 組織メンバーの認証方法を決定する {#decide-authentication-methods-for-your-organization-members}

TiDB Cloudは、組織SSOのために以下の認証方法を提供しています。

- ユーザー名とパスワード
- Google
- GitHub
- Microsoft
- OIDC
- SAML

クラウド組織SSOを有効にすると、最初の4つの方法がデフォルトで有効になります。組織でSSOの使用を強制したい場合は、ユーザー名とパスワードの認証方法を無効にすることができます。

有効になっているすべての認証方法は、カスタムTiDB Cloudログインページに表示されるため、事前に有効または無効にする認証方法を決定する必要があります。

### 自動プロビジョニングを有効にするかどうかを決定する {#decide-whether-to-enable-auto-provision}

自動プロビジョニングは、`組織所有者`または`プロジェクト所有者`からの招待を必要とせずに、メンバーが自動的に組織に参加できる機能です。TiDB Cloudでは、すべてのサポートされている認証方法に対してデフォルトで無効になっています。

- 自動プロビジョニングが認証方法に対して無効になっている場合、`組織所有者`または`プロジェクト所有者`から招待されたユーザーのみがカスタムURLにログインできます。
- 自動プロビジョニングが認証方法に対して有効になっている場合、この認証方法を使用するユーザーは、カスタムURLにログインできます。ログイン後、彼らは組織内でデフォルトの**メンバー**役割が自動的に割り当てられます。

セキュリティ上の考慮事項として、自動プロビジョニングを有効にする場合は、[認証方法の詳細を構成](#step-2-configure-authentication-methods)する際に、認証のために許可される電子メールドメインを制限することをお勧めします。

### クラウド組織SSOの移行計画についてメンバーに通知する {#notify-your-members-about-the-cloud-organization-sso-migration-plan}

クラウド組織SSOを有効にする前に、メンバーに以下のことを通知してください。

- TiDB CloudのカスタムログインURL
- `https://tidbcloud.com`の代わりにカスタムログインURLを使用する開始時刻
- 利用可能な認証方法
- メンバーがカスタムURLにログインするために招待が必要かどうか

## ステップ1. クラウド組織SSOを有効にする {#step-1-enable-cloud-organization-sso}

クラウド組織SSOを有効にするには、以下の手順を実行してください。

1. `組織所有者`の役割を持つユーザーとして[TiDB Cloudコンソール](https://tidbcloud.com)にログインします。

2. TiDB Cloudコンソールの左下隅にある<MDSvgIcon name="icon-top-organization" />をクリックし、**組織設定**をクリックします。

3. **組織設定**ページで、**認証**タブをクリックし、**有効にする**をクリックします。

4. ダイアログボックスで、TiDB Cloud内で一意である必要がある組織のカスタムURLを入力します。

   > **Note:**
   >
   > クラウド組織SSOが有効になると、組織のメンバーはあなたのカスタムURLを使用してTiDB Cloudにログインできるようになります。構成済みのURLを後で変更する必要がある場合は、[TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md)に連絡してサポートを受けてください。

5. **理解して確認する**チェックボックスをクリックし、**有効にする**をクリックします。

   > **Note:**
   >
   > ダイアログにクラウド組織SSOのために再招待および再参加するユーザーのリストが含まれている場合、TiDB Cloudはクラウド組織SSOを有効にした後、これらのユーザーに自動的に招待メールを送信します。招待メールを受け取ったユーザーは、メール内のリンクをクリックして自分のアイデンティティを確認し、カスタムログインページが表示されます。

## ステップ2. 認証方法を構成する {#step-2-configure-authentication-methods}

TiDB Cloudで認証方法を有効にすると、その方法を使用するメンバーがカスタムURLを使用してTiDB Cloudにログインできるようになります。

### ユーザー名とパスワード、Google、GitHub、またはMicrosoftの認証方法を構成する {#configure-username-and-password-google-github-or-microsoft-authentication-methods}

クラウド組織SSOを有効にした後、以下の手順でユーザー名とパスワード、Google、GitHub、またはMicrosoftの認証方法を構成できます。

1. **組織設定**ページで、Google、GitHub、またはMicrosoftの認証方法を必要に応じて有効または無効にします。

2. 有効になっている認証方法について、<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 20H21M3.00003 20H4.67457C5.16376 20 5.40835 20 5.63852 19.9447C5.84259 19.8957 6.03768 19.8149 6.21663 19.7053C6.41846 19.5816 6.59141 19.4086 6.93732 19.0627L19.5001 6.49998C20.3285 5.67156 20.3285 4.32841 19.5001 3.49998C18.6716 2.67156 17.3285 2.67156 16.5001 3.49998L3.93729 16.0627C3.59139 16.4086 3.41843 16.5816 3.29475 16.7834C3.18509 16.9624 3.10428 17.1574 3.05529 17.3615C3.00003 17.5917 3.00003 17.8363 3.00003 18.3255V20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>をクリックして、方法の詳細を構成できます。

3. 方法の詳細では、以下を構成できます。

   - [**アカウントの自動プロビジョニング**](#decide-whether-to-enable-auto-provision)

     デフォルトでは無効になっています。必要に応じて有効にできます。セキュリティ上の考慮事項として、自動プロビジョニングを有効にする場合は、認証のために許可される電子メールドメインを制限することをお勧めします。

   - **許可された電子メールドメイン**

     このフィールドを構成すると、この認証方法の指定された電子メールドメインのみがカスタムURLを使用してTiDB Cloudにログインできます。ドメイン名を入力する際は、`@`記号を除外し、コンマで区切ってください。例：`company1.com,company2.com`。

     > **Note:**
     >
     > ドメインを構成した場合は、設定を保存する前に、現在ログインに使用している電子メールドメインを追加して、TiDB Cloudによってロックアウトされないようにしてください。

4. **保存**をクリックします。

### OIDC認証メソッドの構成 {#configure-the-oidc-authentication-method}

OIDC IDプロトコルを使用するIDプロバイダーがある場合、TiDB CloudログインのOIDC認証メソッドを有効にできます。

TiDB Cloudでは、OIDC認証メソッドはデフォルトで無効になっています。Cloud Organization Cloudを有効にした後、次のようにOIDC認証メソッドを有効にして構成できます。

1. TiDB Cloud Organization SSOのためにIDプロバイダーから次の情報を取得します。

   - 発行者URL
   - クライアントID
   - クライアントシークレット

2. **組織設定**ページで、**認証**タブをクリックし、**認証メソッド**エリアのOIDCの行を見つけ、<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 20H21M3.00003 20H4.67457C5.16376 20 5.40835 20 5.63852 19.9447C5.84259 19.8957 6.03768 19.8149 6.21663 19.7053C6.41846 19.5816 6.59141 19.4086 6.93732 19.0627L19.5001 6.49998C20.3285 5.67156 20.3285 4.32841 19.5001 3.49998C18.6716 2.67156 17.3285 2.67156 16.5001 3.49998L3.93729 16.0627C3.59139 16.4086 3.41843 16.5816 3.29475 16.7834C3.18509 16.9624 3.10428 17.1574 3.05529 17.3615C3.00003 17.5917 3.00003 17.8363 3.00003 18.3255V20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>をクリックしてOIDCメソッドの詳細を表示します。

3. メソッドの詳細では、次のように構成できます。

   - **名前**

     カスタムログインページに表示されるOIDC認証メソッドの名前を指定します。

   - **発行者URL**、**クライアントID**、**クライアントシークレット**

     IdPから取得した対応する値を貼り付けます。

   - [**アカウントの自動プロビジョニング**](#decide-whether-to-enable-auto-provision)

     デフォルトでは無効になっています。必要に応じて有効にできます。セキュリティ上の考慮事項として、自動プロビジョニングを有効にする場合は、認証のために許可される電子メールドメインを制限することをお勧めします。

   - **許可された電子メールドメイン**

     このフィールドが構成されると、この認証メソッドの指定された電子メールドメインのみがカスタムURLを使用してTiDB Cloudにログインできます。ドメイン名を記入する際は、`@`記号を除外し、コンマで区切ってください。例えば、`company1.com,company2.com`。

     > **Note:**
     >
     > 電子メールドメインを構成している場合は、設定を保存する前に、現在ログインに使用している電子メールドメインを追加して、TiDB Cloudによってロックアウトされないようにしてください。

4. **保存**をクリックします。

### SAML認証メソッドの構成 {#configure-the-saml-authentication-method}

SAML IDプロトコルを使用するIDプロバイダーがある場合、TiDB CloudログインのSAML認証メソッドを有効にできます。

> **Note:**
>
> TiDB Cloudは異なるユーザーの一意の識別子として電子メールアドレスを使用します。したがって、組織メンバーの`email`属性がIDプロバイダーで構成されていることを確認してください。

TiDB Cloudでは、SAML認証メソッドはデフォルトで無効になっています。Cloud Organization Cloudを有効にした後、次のようにSAML認証メソッドを有効にして構成できます。

1. TiDB Cloud Organization SSOのためにIDプロバイダーから次の情報を取得します。

   - サインオンURL
   - 署名証明書

2. **組織設定**ページで、**認証**タブをクリックし、**認証メソッド**エリアのSAMLの行を見つけ、<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 20H21M3.00003 20H4.67457C5.16376 20 5.40835 20 5.63852 19.9447C5.84259 19.8957 6.03768 19.8149 6.21663 19.7053C6.41846 19.5816 6.59141 19.4086 6.93732 19.0627L19.5001 6.49998C20.3285 5.67156 20.3285 4.32841 19.5001 3.49998C18.6716 2.67156 17.3285 2.67156 16.5001 3.49998L3.93729 16.0627C3.59139 16.4086 3.41843 16.5816 3.29475 16.7834C3.18509 16.9624 3.10428 17.1574 3.05529 17.3615C3.00003 17.5917 3.00003 17.8363 3.00003 18.3255V20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>をクリックしてSAMLメソッドの詳細を表示します。

3. メソッドの詳細では、次のように構成できます。

   - **名前**

     カスタムログインページに表示されるSAML認証メソッドの名前を指定します。

   - **サインオンURL**

     IdPから取得したURLを貼り付けます。

   - **署名証明書**

     IdPからの署名証明書全体を貼り付けます。`---begin certificate---`から始まり、`---end certificate---`で終わる行を含めてください。

   - [**アカウントの自動プロビジョニング**](#decide-whether-to-enable-auto-provision)

     デフォルトでは無効になっています。必要に応じて有効にできます。セキュリティ上の考慮事項として、自動プロビジョニングを有効にする場合は、認証のために許可される電子メールドメインを制限することをお勧めします。

   - **許可された電子メールドメイン**

     このフィールドが構成されると、この認証メソッドの指定された電子メールドメインのみがカスタムURLを使用してTiDB Cloudにログインできます。ドメイン名を記入する際は、`@`記号を除外し、コンマで区切ってください。例えば、`company1.com,company2.com`。

     > **Note:**
     >
     > 電子メールドメインを構成している場合は、設定を保存する前に、現在ログインに使用している電子メールドメインを追加して、TiDB Cloudによってロックアウトされないようにしてください。

   - **SCIMプロビジョニングアカウント**

     デフォルトでは無効になっています。必要に応じて有効にできます。これにより、TiDB Cloud組織のユーザーとグループのプロビジョニング、非プロビジョニング、およびアイデンティティ管理を一元化および自動化できます。詳細な構成手順については、[SCIMプロビジョニングの構成](#configure-scim-provisioning)を参照してください。

4. **保存**をクリックします。

#### SCIMプロビジョニングの構成 {#configure-scim-provisioning}

[クロスドメインアイデンティティ管理システム（SCIM）](https://www.rfc-editor.org/rfc/rfc7644)は、アイデンティティドメインとITシステム間でユーザーのアイデンティティ情報の自動交換を規定するオープン標準です。SCIMプロビジョニングを構成することで、アイデンティティプロバイダからのユーザーグループがTiDB Cloudに自動的に同期され、これらのグループの役割をTiDB Cloudで一元的に管理できます。

> **Note:**
>
> SCIMプロビジョニングは、[SAML認証メソッド](#configure-the-saml-authentication-method)でのみ有効にできます。

1. TiDB Cloudで、[SAML認証メソッド](#configure-the-saml-authentication-method)の**SCIMプロビジョニングアカウント**オプションを有効にし、次に後で使用するために以下の情報を記録します。

   - SCIMコネクタのベースURL
   - ユーザーの一意の識別子フィールド
   - 認証モード

2. アイデンティティプロバイダで、TiDB CloudのSCIMプロビジョニングを構成します。

   1. アイデンティティプロバイダで、SAMLアプリケーション統合にTiDB Cloud組織のSCIMプロビジョニングを追加します。

      例えば、アイデンティティプロバイダがOktaの場合、[アプリケーション統合にSCIMプロビジョニングを追加](https://help.okta.com/en-us/content/topics/apps/apps_app_integration_wizard_scim.htm)を参照してください。

   2. アイデンティティプロバイダの所定のグループにSAMLアプリケーション統合を割り当て、グループのメンバーがアプリケーション統合にアクセスして使用できるようにします。

      例えば、アイデンティティプロバイダがOktaの場合、[アプリ統合をグループに割り当てる](https://help.okta.com/en-us/content/topics/provisioning/lcm/lcm-assign-app-groups.htm)を参照してください。

   3. アイデンティティプロバイダからユーザーグループをTiDB Cloudにプッシュします。

      例えば、アイデンティティプロバイダがOktaの場合、[グループプッシュの管理](https://help.okta.com/en-us/content/topics/users-groups-profiles/usgp-group-push-main.htm)を参照してください。

3. TiDB Cloudで、アイデンティティプロバイダからプッシュされたグループを表示します。

   1. [TiDB Cloudコンソール](https://tidbcloud.com)の左下隅で<MDSvgIcon name="icon-top-organization" />をクリックし、次に**組織設定**をクリックします。
   2. **組織設定**ページで、**グループ**タブをクリックします。アイデンティティプロバイダから同期されたグループが表示されます。
   3. グループ内のユーザーを表示するには、**ビュー**をクリックします。

4. TiDB Cloudで、アイデンティティプロバイダからプッシュされたグループに役割を付与します。

   > **Note:**
   >
   > グループに役割を付与すると、グループのすべてのメンバーがその役割を取得します。グループにすでにTiDB Cloud組織のメンバーが含まれている場合、これらのメンバーもグループの新しい役割を取得します。

   1. グループに組織の役割を付与するには、**組織別**をクリックし、**組織役割**列で役割を構成します。組織の役割の権限については、[組織役割](/tidb-cloud/manage-user-access.md#organization-roles)を参照してください。
   2. グループにプロジェクトの役割を付与するには、**プロジェクト別**をクリックし、**プロジェクト役割**列で役割を構成します。プロジェクトの役割の権限については、[プロジェクト役割](/tidb-cloud/manage-user-access.md#project-roles)を参照してください。

5. アイデンティティプロバイダでプッシュされたグループのメンバーを変更すると、これらの変更はTiDB Cloudの対応するグループに動的に同期されます。

   - アイデンティティプロバイダのグループに新しいメンバーが追加されると、これらのメンバーは対応するグループの役割を取得します。
   - アイデンティティプロバイダのグループから一部のメンバーが削除されると、これらのメンバーはTiDB Cloudの対応するグループからも削除されます。
