---
title: TiDB Cloud TPC-C Performance Test Report for TiDB v7.5.0
summary: Introduce the TPC-C performance test results for a TiDB Dedicated cluster with the TiDB version of v7.5.0.
---

# TiDB Cloud TPC-C パフォーマンステストレポート for TiDB v7.5.0 {#tidb-cloud-tpc-c-performance-test-report-for-tidb-v7-5-0}

このドキュメントは、TiDB Dedicated クラスターにおける TiDB バージョン v7.5.0 の TPC-C パフォーマンステストの手順と結果を提供します。このレポートは、TiDB Self-Hosted v7.5.0 クラスターのパフォーマンスの参考としても利用できます。

## テスト概要 {#test-overview}

このテストは、TiDB v7.5.0 の Online Transactional Processing (OLTP) シナリオにおける TPC-C パフォーマンスを示すことを目的としています。

## テスト環境 {#test-environment}

### TiDB クラスター {#tidb-cluster}

テストは、以下の設定を持つ TiDB クラスターで実施されます:

-   クラスタータイプ: [TiDB Dedicated](/tidb-cloud/select-cluster-tier.md#tidb-dedicated)
-   クラスターバージョン: v7.5.0
-   クラウドプロバイダー: AWS (us-west-2)
-   クラスター構成:

    | ノードタイプ | ノードサイズ          | ノード数量 | ノードストレージ |
    | :----- | :-------------- | :---- | :------- |
    | TiDB   | 16 vCPU, 32 GiB | 2     | N/A      |
    | TiKV   | 16 vCPU, 64 GiB | 3     | 1000 GiB |

### ベンチマーク実行者 {#benchmark-executor}

ベンチマーク実行者は、SQL クエリを TiDB クラスターに送信します。このテストでは、そのハードウェア構成は以下の通りです:

-   マシンタイプ: Amazon EC2 (us-west-2)
-   インスタンスタイプ: c6a.2xlarge

## テスト手順 {#test-steps}

このセクションでは、TPC-C パフォーマンステストの手順を段階的に実行する方法を紹介します。

1.  [TiDB Cloudコンソール](https://tidbcloud.com/)で、[テスト環境](#tidb-cluster)の要件を満たすTiDB専用クラスタを作成します。

    詳細については、[TiDB専用クラスタの作成](/tidb-cloud/create-tidb-cluster.md)を参照してください。

2.  ベンチマーク実行者で、新しく作成したクラスタに接続し、`tpcc`という名前のデータベースを作成します。

    クラスタに接続する方法については、[プライベートエンドポイントを介したTiDB専用への接続](/tidb-cloud/set-up-private-endpoint-connections.md)を参照してください。

    `tpcc`データベースを作成するには、次のSQLステートメントを実行します:

    ```sql
    CREATE DATABASE tpcc;
    ```

3.  `tpcc`データベースにTPC-Cデータをロードします。

    1.  このドキュメントのテストは、[go-tpc](https://github.com/pingcap/go-tpc)に基づいて実装されています。次のコマンドを使用してテストプログラムをダウンロードできます:

        ```shell
        curl --proto '=https' --tlsv1.2 -sSf https://raw.githubusercontent.com/pingcap/go-tpc/master/install.sh | sh
        ```

    2.  次の`go-tpc tpcc`コマンドを実行して、`tpcc`データベースに1,000の倉庫をインポートします。`${HOST}`、`${THREAD}`、`${PASSWORD}`を実際の値に置き換えてください。このドキュメントでは、`${THREAD}`の値を`50`、`100`、`200`で3つのテストを実施します。

        ```shell
        go-tpc tpcc --host ${HOST} --warehouses 1000 prepare -P 4000 -D tpcc -T ${THREAD} --time 2h0m0s -p ${PASSWORD} --ignore-error
        ```

4.  TiDBオプティマイザが最適な実行計画を生成できるようにするために、TPC-Cテストを実施する前に次のSQLステートメントを実行して統計情報を収集します:

    ```sql
    ANALYZE TABLE customer;
    ANALYZE TABLE district;
    ANALYZE TABLE history;
    ANALYZE TABLE item;
    ANALYZE TABLE new_order;
    ANALYZE TABLE order_line;
    ANALYZE TABLE orders;
    ANALYZE TABLE stock;
    ANALYZE TABLE warehouse;
    ```

    統計情報の収集を加速するために、収集前に次のSQLステートメントを実行します:

    ```sql
    SET tidb_build_stats_concurrency=16;
    SET tidb_distsql_scan_concurrency=16;
    SET tidb_index_serial_scan_concurrency=16;
    ```

5.  TiDB専用クラスタでストレステストを実施するために、次の`go-tpc tpcc`コマンドを実行します。各並行性について、テストは2時間かかります。

    ```shell
    go-tpc tpcc --host ${HOST} -P 4000 --warehouses 1000 run -D tpcc -T ${THREAD} --time 2h0m0s -p ${PASSWORD} --ignore-error
    ```

6.  `NEW_ORDER`からtpmCデータを抽出します。

    TPC-CはtpmC（1分あたりのトランザクション数）を使用して最大合格スループット（MQTh、最大合格スループット）を測定します。トランザクションはNewOrderトランザクションであり、最終的な単位は1分あたりに処理される新しい注文の数です。

## テスト結果 {#test-results}

[test environment](#test-environment)におけるv7.5.0のTPC-Cパフォーマンスは以下の通りです:

| Threads | v7.5.0 tpmC |
| :------ | :---------- |
| 50      | 37,443      |
| 100     | 67,899      |
| 200     | 93,038      |

![TPC-C](/media/tidb-cloud/v7.5.0_tpcc.png)
