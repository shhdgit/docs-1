---
title: tiup cluster upgrade
---

# tiup cluster upgrade {#tiup-cluster-upgrade}

`tiup cluster upgrade`コマンドは、指定されたクラスタを特定のバージョンにアップグレードするために使用されます。

## 構文 {#syntax}

```shell
tiup cluster upgrade <cluster-name> <version> [flags]
```

- `<cluster-name>`：操作するクラスタ名。クラスタ名を忘れた場合は、[cluster list](/tiup/tiup-component-cluster-list.md)コマンドで確認できます。
- `<version>`：アップグレードするターゲットバージョン（例：`v7.1.3`）。現在、現在のクラスタよりも高いバージョンにのみアップグレードすることができます。つまり、ダウングレードは許可されません。また、ナイトリーバージョンにアップグレードすることもできません。

## オプション {#options}

### --force {#force}

- クラスタをアップグレードするには、クラスタが現在起動していることを確認する必要があります。一部の場合、クラスタが起動していないときにアップグレードしたい場合があります。その場合は、`--force`を使用してアップグレード中にエラーを無視し、バイナリファイルを強制的に置き換えてクラスタを起動することができます。
- データタイプ：`BOOLEAN`
- デフォルト：false

> **Note:**
>
> サービスを提供しているクラスタを強制的にアップグレードすると、サービスが利用できなくなる可能性があります。起動していないクラスタは、アップグレードが成功した後に自動的に起動されます。

### --transfer-timeout {#transfer-timeout}

- PDまたはTiKVをアップグレードすると、アップグレードされたノードのリーダーはまず他のノードに移行されます。移行プロセスには時間がかかるため、`-transfer-timeout`オプションで最大待機時間（秒単位）を設定できます。タイムアウト後、待機はスキップされ、サービスが直接アップグレードされます。
- データタイプ：`uint`
- デフォルト：600

> **Note:**
>
> 待機がスキップされ、サービスが直接アップグレードされると、サービスのパフォーマンスが不安定になる可能性があります。

### --ignore-config-check {#ignore-config-check}

- バイナリが更新された後、TiDB、TiKV、およびPDコンポーネントに対して、`<binary> --config-check <config-file>`を使用して構成チェックが実行されます。`<binary>`は新しくデプロイされたバイナリのパスであり、`<config-file>`はユーザー構成に基づいて生成された構成ファイルです。このチェックをスキップするには、`--ignore-config-check`オプションを使用できます。
- データタイプ：`BOOLEAN`
- デフォルト：false

### --offline {#offline}

- 現在のクラスタが実行されていないことを宣言します。このオプションが指定されている場合、TiUPはサービスリーダーを別のノードに追い出したり、サービスを再起動したりするのではなく、クラスタコンポーネントのバイナリファイルのみを置き換えます。
- データタイプ：`BOOLEAN`
- このオプションは、`false`値でデフォルトで無効になっています。このオプションを有効にするには、コマンドにこのオプションを追加し、`true`値を渡すか、値を渡さないでください。

### -h、--help {#h-help}

- ヘルプ情報を出力します。
- データタイプ：`BOOLEAN`
- デフォルト：false

## 出力 {#output}

アップグレードの進行状況のログ。

[<< 前のページに戻る - TiUP Clusterコマンドリスト](/tiup/tiup-component-cluster.md#command-list)
