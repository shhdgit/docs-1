---
title: Manage TiUP Components with TiUP Commands
summary: Learn how to manage TiUP components using TiUP commands.
---

# TiUPコマンドでTiUPコンポーネントを管理する {#manage-tiup-components-with-tiup-commands}

次のTiUPコマンドを使用して、TiUPエコシステム内のコンポーネントを管理できます。

- list: コンポーネントリストをクエリします。このTiUPコマンドを使用することで、インストール可能なすべてのオプションのコンポーネントと各コンポーネントのオプションのバージョンを確認できます。
- install: 特定のバージョンのコンポーネントをインストールします。
- update: コンポーネントを最新バージョンに更新します。
- uninstall: コンポーネントをアンインストールします。
- status: 実行中のコンポーネントのステータスを確認します。
- clean: コンポーネントが展開されているインスタンスをクリーンアップします。
- help: ヘルプ情報を表示します。このコマンドに別のTiUPコマンドを追加すると、追加されたコマンドの使用方法が表示されます。

このドキュメントでは、一般的なコンポーネント管理操作と対応するTiUPコマンドについて紹介します。

## コンポーネントリストをクエリ {#query-the-component-list}

`tiup list`コマンドを使用して、コンポーネントリストをクエリできます。このコマンドの使用法は次のとおりです。

- `tiup list`: インストール可能なコンポーネントを確認します。
- `tiup list ${component}`: 特定のコンポーネントのバージョンを確認します。

上記のコマンドでは、以下のフラグも使用できます。

- `--installed`: ローカルにインストールされているコンポーネントまたは特定のコンポーネントのバージョンを確認します。
- `--all`: 非表示のコンポーネントを含むすべてのコンポーネントを表示します。
- `--verbose`: インストールされたバージョンやサポートされているプラットフォームを含むすべての列を表示します。

例1: 現在インストールされているすべてのコンポーネントを表示します。

```shell
tiup list --installed
```

例2: サーバーからインストール可能なすべてのTiKVコンポーネントのバージョンリストを取得します。

```shell
tiup list tikv
```

## コンポーネントをインストール {#install-components}

`tiup install`コマンドを使用して、コンポーネントリストをクエリできます。このコマンドの使用法は次のとおりです。

- `tiup install <component>`: 指定したコンポーネントの最新安定版をインストールします。
- `tiup install <component>:[version]`: 指定したバージョンの指定したコンポーネントをインストールします。

例1: TiUPを使用して、TiDBの最新安定版をインストールします。

```shell
tiup install tidb
```

例2: TiUPを使用して、TiDBのナイトリーバージョンをインストールします。

```shell
tiup install tidb:nightly
```

例3: TiUPを使用して、TiKV v7.1.3をインストールします。

```shell
tiup install tikv:v7.1.3
```

## コンポーネントをアップグレード {#upgrade-components}

コンポーネントの新しいバージョンが公開された後、`tiup update`コマンドを使用してこのコンポーネントをアップグレードできます。このコマンドの使用法は基本的に`tiup install`と同じですが、以下のフラグが異なります。

- `--all`: すべてのコンポーネントをアップグレードします。
- `--nightly`: ナイトリーバージョンにアップグレードします。
- `--self`: TiUP自体を最新バージョンにアップグレードします。
- `--force`: 最新バージョンに強制的にアップグレードします。

例1: すべてのコンポーネントを最新バージョンにアップグレードします。

```shell
tiup update --all
```

例2: すべてのコンポーネントをナイトリーバージョンにアップグレードします。

```shell
tiup update --all --nightly
```

例3: TiUPを最新バージョンにアップグレードします。

```shell
tiup update --self
```

## コンポーネントを操作 {#operate-components}

インストールが完了した後、`tiup <component>`コマンドを使用して対応するコンポーネントを起動できます。

```shell
tiup [flags] <component>[:version] [args...]

Flags:
  -T, --tag string                     コンポーネントインスタンスのタグを指定します。
```

このコマンドを使用するには、コンポーネント名とオプションのバージョンを指定する必要があります。バージョンが指定されていない場合は、このコンポーネントの最新安定版（インストール済み）が使用されます。

コンポーネントを起動する前に、TiUPはそのためのディレクトリを作成し、このコンポーネントを操作するためのディレクトリに配置します。コンポーネントはこのディレクトリ内のすべてのデータを生成し、このディレクトリの名前はコンポーネントの操作時に指定されたタグ名です。タグが指定されていない場合、タグ名はランダムに生成されます。この作業ディレクトリは、インスタンスが終了すると*自動的に削除*されます。

同じコンポーネントを複数回起動し、前の作業ディレクトリを再利用する場合は、コンポーネントを起動する際に`--tag`を使用して同じ名前を指定できます。タグが指定された後は、作業ディレクトリはインスタンスが終了しても*自動的に削除されません*。これにより、作業ディレクトリを再利用するのが便利になります。

例1: TiDB v7.1.3を操作します。

```shell
tiup tidb:v7.1.3
```

例2: TiKVの操作時にタグを指定します。

```shell
tiup --tag=experiment tikv
```

### コンポーネントの動作状況をクエリ {#query-the-operating-status-of-a-component}

`tiup status`コマンドを使用して、コンポーネントの動作状況を確認できます。

```shell
tiup status
```

このコマンドを実行すると、1行に1つのインスタンスが含まれるリストが表示されます。リストには次の列が含まれます。

- `Name`: インスタンスのタグ名。
- `Component`: インスタンスのコンポーネント名。
- `PID`: インスタンスのプロセスID。
- `Status`: インスタンスの状態。`RUNNING`はインスタンスが動作していることを意味し、`TERM`はインスタンスが終了していることを意味します。
- `Created Time`: インスタンスの開始時刻。
- `Directory`: インスタンスの作業ディレクトリ。`--tag`を使用して指定できます。
- `Binary`: インスタンスの実行可能プログラム。`--binpath`を使用して指定できます。
- `Args`: インスタンスの動作引数。

### コンポーネントインスタンスをクリーンアップ {#clean-component-instance}

`tiup clean`コマンドを使用して、コンポーネントインスタンスをクリーンアップし、作業ディレクトリを削除できます。クリーンアップ前にインスタンスがまだ動作している場合は、関連するプロセスがまず終了されます。コマンドの使用法は次のとおりです。

```bash
tiup clean [tag] [flags]
```

このコマンドでは、次のフラグがサポートされています。

- `--all`: すべてのインスタンス情報をクリーンアップします。

上記のコマンドでは、`tag`はクリーンアップするインスタンスのタグです。`--all`を使用すると、タグを渡す必要はありません。

例1: `experiment`タグ名のコンポーネントインスタンスをクリーンアップします。

```shell
tiup clean experiment
```

例2: すべてのコンポーネントインスタンスをクリーンアップします。

```shell
tiup clean --all
```

### コンポーネントをアンインストール {#uninstall-components}

TiUPを使用してインストールされたコンポーネントは、ローカルディスクスペースを使用します。古いバージョンのコンポーネントを多く保持したくない場合は、現在インストールされているコンポーネントのバージョンを確認し、その後、このコンポーネントをアンインストールできます。

`tiup uninstall`コマンドを使用して、コンポーネントのすべてのバージョンまたは特定のバージョンをアンインストールできます。このコマンドはすべてのコンポーネントのアンインストールもサポートしています。コマンドの使用法は次のとおりです。

```bash
tiup uninstall [component][:version] [flags]
```

このコマンドでは、次のフラグがサポートされています。

- `--all`: すべてのコンポーネントまたはバージョンをアンインストールします。
- `--self`: TiUP自体をアンインストールします。

`component`はアンインストールするコンポーネントです。`version`はアンインストールするバージョンです。`component`と`version`の両方を`tiup uninstall`コマンドで無視することができます。どちらか一方を無視する場合は、`--all`フラグを追加する必要があります。

- バージョンを無視する場合、`--all`を追加すると、このコンポーネントのすべてのバージョンをアンインストールします。
- バージョンとコンポーネントの両方を無視する場合、`--all`を追加すると、すべてのバージョンのすべてのコンポーネントをアンインストールします。

例1: TiDB v7.1.3をアンインストールします。

```shell
tiup uninstall tidb:v7.1.3
```

例2: すべてのバージョンのTiKVをアンインストールします。

```shell
tiup uninstall tikv --all
```

例3: インストールされているすべてのコンポーネントをアンインストールします。

```shell
tiup uninstall --all
```
