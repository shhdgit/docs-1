---
title: Manage TiUP Components with TiUP Commands
summary: Learn how to manage TiUP components using TiUP commands.
---

# TiUPコマンドでTiUPコンポーネントを管理する {#manage-tiup-components-with-tiup-commands}

TiUPエコシステム内のコンポーネントを管理するために、以下のTiUPコマンドを使用することができます：

- list：コンポーネントリストをクエリします。このTiUPコマンドを使用することで、インストール可能なすべてのオプションのコンポーネントと各コンポーネントのオプションバージョンを確認することができます。
- install：特定のバージョンのコンポーネントをインストールします。
- update：コンポーネントを最新バージョンに更新します。
- uninstall：コンポーネントをアンインストールします。
- status：実行中のコンポーネントの状態を確認します。
- clean：コンポーネントがデプロイされているインスタンスをクリーンアップします。
- help：ヘルプ情報を表示します。このコマンドに別のTiUPコマンドを追加すると、追加されたコマンドの使用方法が表示されます。

このドキュメントでは、一般的なコンポーネント管理操作と対応するTiUPコマンドを紹介します。

## コンポーネントリストをクエリする {#query-the-component-list}

`tiup list`コマンドを使用して、コンポーネントリストをクエリすることができます。このコマンドの使用方法は以下の通りです：

- `tiup list`：インストール可能なコンポーネントを確認します。
- `tiup list ${component}`：特定のコンポーネントのインストール可能なバージョンを確認します。

また、上記のコマンドには以下のフラグを使用することもできます：

- `--installed`：ローカルにインストールされているコンポーネントまたは特定のコンポーネントのバージョンを確認します。
- `--all`：非表示のコンポーネントを含むすべてのコンポーネントを表示します。
- `--verbose`：すべての列（インストールされているバージョンやサポートされているプラットフォームを含む）を表示します。

例1：現在インストールされているすべてのコンポーネントを表示する。

```shell
tiup list --installed
```

例2：サーバーからインストール可能なすべてのバージョンのTiKVコンポーネントのリストを取得します。

```shell
tiup list tikv
```

## コンポーネントのインストール {#install-components}

`tiup install`コマンドを使用して、コンポーネントのリストをクエリできます。このコマンドの使用方法は以下の通りです：

- `tiup install <component>`：指定されたコンポーネントの最新の安定版をインストールします。
- `tiup install <component>:[version]`：指定されたコンポーネントの指定されたバージョンをインストールします。

例1：TiUPを使用して最新の安定版のTiDBをインストールする。

```shell
tiup install tidb
```

例2：TiUPを使用してTiDBの夜間バージョンをインストールします。

```shell
tiup install tidb:nightly
```

例3：TiUPを使用してTiKV v7.1.3をインストールする。

```shell
tiup install tikv:v7.1.3
```

## コンポーネントのアップグレード {#upgrade-components}

新しいバージョンのコンポーネントが公開された場合、`tiup update`コマンドを使用してこのコンポーネントをアップグレードすることができます。このコマンドの使用方法は、次のフラグを除いて`tiup install`と基本的に同じです。

- `--all`: すべてのコンポーネントをアップグレードします。
- `--nightly`: ナイトリーバージョンにアップグレードします。
- `--self`: TiUP自体を最新バージョンにアップグレードします。
- `--force`: 最新バージョンに強制的にアップグレードします。

例1：すべてのコンポーネントを最新バージョンにアップグレードする。

```shell
tiup update --all
```

例2：すべてのコンポーネントを夜間バージョンにアップグレードします。

```shell
tiup update --all --nightly
```

例3：最新バージョンのTiUPにアップグレードする。

```shell
tiup update --self
```

## コンポーネントの操作 {#operate-components}

インストールが完了したら、`tiup <component>`コマンドを使用して対応するコンポーネントを起動できます。

```shell
tiup [flags] <component>[:version] [args...]

Flags:
  -T, --tag string                     Specifies the tag for the component instance.
```

このコマンドを使用するには、コンポーネント名とオプションのバージョンを指定する必要があります。バージョンが指定されていない場合、このコンポーネントの最新の安定版（インストール済み）が使用されます。

コンポーネントが開始される前に、TiUPはそのためのディレクトリを作成し、その後、このコンポーネントを操作するためのディレクトリに配置します。コンポーネントはこのディレクトリ内ですべてのデータを生成し、このディレクトリの名前はコンポーネントが操作されるときに指定されるタグ名です。タグが指定されていない場合、タグ名はランダムに生成されます。この作業ディレクトリは、インスタンスが終了すると*自動的に削除*されます。

同じコンポーネントを複数回起動し、前の作業ディレクトリを再利用する場合は、コンポーネントを起動するときに`--tag`を使用して同じ名前を指定することができます。タグが指定されると、作業ディレクトリはインスタンスが終了するときに*自動的に削除されない*ため、作業ディレクトリを再利用するのに便利です。

例1：TiDB v7.1.3を操作する。

```shell
tiup tidb:v7.1.3
```

例2：TiKVが操作するタグを指定します。

```shell
tiup --tag=experiment tikv
```

### コンポーネントの動作状況をクエリする {#query-the-operating-status-of-a-component}

コンポーネントの動作状況を確認するには、`tiup status`コマンドを使用できます：

```shell
tiup status
```

このコマンドを実行すると、1行に1つのインスタンスのリストが表示されます。リストには次の列が含まれています：

- `Name`：インスタンスのタグ名。
- `Component`：インスタンスのコンポーネント名。
- `PID`：インスタンスのプロセスID。
- `Status`：インスタンスの状態。`RUNNING`はインスタンスが動作していることを示します。`TERM`はインスタンスが終了していることを示します。
- `Created Time`：インスタンスの開始時刻。
- `Directory`：インスタンスの作業ディレクトリで、`--tag`を使用して指定できます。
- `Binary`：インスタンスの実行可能プログラムで、`--binpath`を使用して指定できます。
- `Args`：インスタンスの動作引数。

### コンポーネントインスタンスのクリーンアップ {#clean-component-instance}

`tiup clean`コマンドを使用して、コンポーネントインスタンスをクリーンアップし、作業ディレクトリを削除することができます。クリーンアップ前にインスタンスがまだ動作している場合は、関連するプロセスが最初に終了されます。コマンドの使用方法は次のとおりです：

```bash
tiup clean [tag] [flags]
```

以下のフラグがサポートされています：

- `--all`：すべてのインスタンス情報をクリーンアップします。

上記のコマンドでは、`tag`はクリーンアップするインスタンスのタグです。`--all`が使用される場合、タグは渡されません。

例1：`experiment`タグ名を持つコンポーネントインスタンスをクリーンアップします。

```shell
tiup clean experiment
```

例2：すべてのコンポーネントインスタンスをクリーンアップします。

```shell
tiup clean --all
```

### コンポーネントのアンインストール {#uninstall-components}

TiUPを使用してインストールされたコンポーネントは、ローカルのディスクスペースを占有します。古いバージョンのコンポーネントを多く保持したくない場合は、現在インストールされているコンポーネントのバージョンを確認し、そのコンポーネントをアンインストールすることができます。

`tiup uninstall`コマンドを使用して、すべてのバージョンまたは特定のバージョンのコンポーネントをアンインストールすることができます。このコマンドはすべてのコンポーネントをアンインストールすることもサポートしています。コマンドの使用方法は以下の通りです：

```bash
tiup uninstall [component][:version] [flags]
```

このコマンドでは、次のフラグがサポートされています：

- `--all`：すべてのコンポーネントまたはバージョンをアンインストールします。
- `--self`：TiUP自体をアンインストールします。

`component`はアンインストールするコンポーネントです。`version`はアンインストールするバージョンです。`tiup uninstall`コマンドでは、`component`と`version`の両方を無視することができます。これらのうちどちらか一方を無視する場合は、`--all`フラグを追加する必要があります。

- バージョンが無視される場合、`--all`を追加すると、このコンポーネントのすべてのバージョンをアンインストールすることを意味します。
- バージョンとコンポーネントの両方が無視される場合、`--all`を追加すると、すべてのバージョンのすべてのコンポーネントをアンインストールすることを意味します。

例1：TiDB v7.1.3をアンインストールする。

```shell
tiup uninstall tidb:v7.1.3
```

例2：すべてのバージョンのTiKVをアンインストールします。

```shell
tiup uninstall tikv --all
```

例3：すべてのインストールされたコンポーネントをアンインストールします。

```shell
tiup uninstall --all
```
